import numpy as np
import matplotlib.pyplot as plt

X = [8, 16, 32, 64, 128, 256, 512, 1024]

#############################################################
# Scalar
#############################################################
column_headers = ['VLEN', 'SEW', 'LMUL', 'Cycles']
Scalar_32b = (0, 32, 0, [104, 177, 323, 615, 1199, 2367, 4703, 9375])
Scalar_16b = (0, 16, 0, [153, 252, 450, 846, 1638, 3222, 6390, 12726])
Scalar_8b  = (0,  8, 0, [138, 229, 411, 775, 1503, 2959, 5871, 11695])

#############################################################
# VLEN = 64
#############################################################
Vector_32b_m1 = (64, 32, 1, [150, 282, 546, 1074, 2130, 4242, 8466, 16914])
Vector_16b_m1 = (64, 16, 1, [82, 144, 268, 516, 1012, 2004, 3988, 7956])
Vector_8b_m1  = (64,  8, 1, [51, 81, 141, 261, 501, 981, 1941, 3861])
Vector_32b_m2 = (64, 32, 2, [102, 186, 354, 690, 1362, 2706, 5394, 10770])
Vector_16b_m2 = (64, 16, 2, [58, 96, 172, 324, 628, 1236, 2452, 4884])
Vector_8b_m2  = (64,  8, 2, [55, 58, 95, 169, 317, 613, 1205, 2389])
Vector_32b_m4 = (64, 32, 4, [79, 140, 262, 506, 994, 1970, 3922, 7826])
Vector_16b_m4 = (64, 16, 4, [64, 73, 126, 232, 444, 868, 1716, 3412])
Vector_8b_m4  = (64,  8, 4, [59, 64, 73, 125, 229, 437, 853, 1685])
Vector_32b_m8 = (64, 32, 8, [88, 114, 211, 405, 793, 1569, 3121, 6225])
Vector_16b_m8 = (64, 16, 8, [72, 82, 100, 181, 343, 667, 1315, 2611])
Vector_8b_m8  = (64,  8, 8, [67, 72, 82, 100, 180, 340, 660, 1300])

#############################################################
# VLEN = 128
#############################################################
Vector_32b_m1 = (128, 32, 1, [92, 166, 314, 610, 1202, 2386, 4754, 9490])
Vector_16b_m1 = (128, 16, 1, [55, 90, 160, 300, 580, 1140, 2260, 4500])
Vector_8b_m1  = (128,  8, 1, [55, 55, 89, 157, 293, 565, 1109, 2197])
Vector_32b_m2 = (128, 32, 2, [68, 118, 218, 418, 818, 1618, 3218, 6418])
Vector_16b_m2 = (128, 16, 2, [59, 66, 112, 204, 388, 756, 1492, 2964])
Vector_8b_m2  = (128,  8, 2, [57, 59, 66, 111, 201, 381, 741, 1461])
Vector_32b_m4 = (128, 32, 4, [74, 95, 172, 326, 634, 1250, 2482, 4946])
Vector_16b_m4 = (128, 16, 4, [63, 72, 89, 158, 296, 572, 1124, 2228])
Vector_8b_m4  = (128,  8, 4, [61, 63, 72, 89, 157, 293, 565, 1109])
Vector_32b_m8 = (128, 32, 8, [82, 104, 146, 275, 533, 1049, 2081, 4145])
Vector_16b_m8 = (128, 16, 8, [71, 80, 98, 132, 245, 471, 923, 1827])
Vector_8b_m8  = (128,  8, 8, [69, 71, 80, 98, 132, 244, 468, 916])

#############################################################
# VLEN = 256
#############################################################

Vector_32b_m1 = (256, 32, 1, [63, 108, 198, 378, 738, 1458, 2898, 5778])
Vector_16b_m1 = (256, 16, 1, [59, 63, 106, 192, 364, 708, 1396, 2772])
Vector_8b_m1  = (256,  8, 1, [55, 59, 63, 105, 189, 357, 693, 1365])
Vector_32b_m2 = (256, 32, 2, [67, 84, 150, 282, 546, 1074, 2130, 4242])
Vector_16b_m2 = (256, 16, 2, [61, 67, 82, 144, 268, 516, 1012, 2004])
Vector_8b_m2  = (256,  8, 2, [57, 61, 67, 82, 143, 265, 509, 997])
Vector_32b_m4 = (256, 32, 4, [71, 90, 127, 236, 454, 890, 1762, 3506])
Vector_16b_m4 = (256, 16, 4, [65, 71, 88, 121, 222, 424, 828, 1636])
Vector_8b_m4  = (256,  8, 4, [61, 65, 71, 88, 121, 221, 421, 821])
Vector_32b_m8 = (256, 32, 8, [79, 98, 136, 210, 403, 789, 1561, 3105])
Vector_16b_m8 = (256, 16, 8, [73, 79, 96, 130, 196, 373, 727, 1435])
Vector_8b_m8  = (256,  8, 8, [69, 73, 79, 96, 130, 196, 372, 724])

dtype = np.dtype([
    ('VLEN', 'i4'),
    ('SEW', 'i4'),
    ('LMUL', 'i4'),
    ('Cycles', 'O')  # Object type for list of cycles
])

# Create an empty structured numpy array with a specified length
data = np.array([
    Scalar_32b,    Scalar_16b,    Scalar_8b,
    Vector_32b_m1, Vector_16b_m1, Vector_8b_m1,
    Vector_32b_m2, Vector_16b_m2, Vector_8b_m2,
    Vector_32b_m4, Vector_16b_m4, Vector_8b_m4,
    Vector_32b_m8, Vector_16b_m8, Vector_8b_m8
], dtype=dtype)

# Fix VLEN and SEW values
fixed_VLEN = 128
fixed_SEW = 32

# Extract rows with fixed VLEN and SEW
filtered_data = data[(data['VLEN'] == fixed_VLEN) & (data['SEW'] == fixed_SEW)]

# X-axis values
X = [8, 16, 32, 64, 128, 256, 512, 1024]

# Plot
plt.figure(figsize=(10, 6))

for row in filtered_data:
    LMUL = row['LMUL']
    cycles = row['Cycles']
    plt.plot(X, cycles, label=f'LMUL={LMUL}')

# Customize plot
plt.xlabel('X')
plt.ylabel('Cycles')
plt.title(f'Cycles for VLEN={fixed_VLEN} and SEW={fixed_SEW} with varying LMUL')
plt.legend()
plt.grid(True)

# Show plot
plt.show()